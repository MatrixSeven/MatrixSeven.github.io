---
title: Clojureçš„å®[1]
toc: true
comments: true
date: 2017-07-28 12:57:11
tags: [clojure]
categories: Clojureå­¦ä¹ 
---
### 1. å®æ˜¯ä»€ä¹ˆ?
`å®`æ˜¯ä»€ä¹ˆ,æè¿‡c++çš„ä¸€å®šä¸é™Œç”Ÿ,å®å°±æ˜¯ç”¨æ¥å‘Šè¯‰ç¼–è¯‘å™¨å¦‚ä½•ç¼–è¯‘çš„ä¸€äº›æŒ‡ä»¤,å¦‚ä½•é€šä¿—çš„ç†è§£å®å‘¢?
ä»¥æ¥æ¥æºäº: **[ç»´åŸºç™¾ç§‘-å®](https://zh.wikipedia.org/wiki/%E5%B7%A8%E9%9B%86)**
>è®¡ç®—æœºç§‘å­¦é‡Œçš„å®æ˜¯ä¸€ç§æŠ½è±¡ï¼ˆAbstractionï¼‰ï¼Œå®ƒæ ¹æ®ä¸€ç³»åˆ—é¢„å®šä¹‰çš„è§„åˆ™æ›¿æ¢ä¸€å®šçš„æ–‡æœ¬æ¨¡å¼ã€‚è§£é‡Šå™¨æˆ–ç¼–è¯‘å™¨åœ¨é‡åˆ°å®æ—¶ä¼šè‡ªåŠ¨è¿›è¡Œè¿™ä¸€æ¨¡å¼æ›¿æ¢ã€‚å¯¹äºç¼–è¯‘è¯­è¨€ï¼Œå®å±•å¼€åœ¨ç¼–è¯‘æ—¶å‘ç”Ÿï¼Œè¿›è¡Œå®å±•å¼€çš„å·¥å…·å¸¸è¢«ç§°ä¸ºå®å±•å¼€å™¨ã€‚å®è¿™ä¸€æœ¯è¯­ä¹Ÿå¸¸å¸¸è¢«ç”¨äºè®¸å¤šç±»ä¼¼çš„ç¯å¢ƒä¸­ï¼Œå®ƒä»¬æ˜¯æºè‡ªå®å±•å¼€çš„æ¦‚å¿µï¼Œè¿™åŒ…æ‹¬é”®ç›˜å®å’Œå®è¯­è¨€ã€‚ç»å¤§å¤šæ•°æƒ…å†µä¸‹ï¼Œâ€œå®â€è¿™ä¸ªè¯çš„ä½¿ç”¨æš—ç¤ºç€å°†å°å‘½ä»¤æˆ–åŠ¨ä½œè½¬åŒ–ä¸ºä¸€ç³»åˆ—æŒ‡ä»¤ã€‚
å®çš„ç”¨é€”åœ¨äºè‡ªåŠ¨åŒ–é¢‘ç¹ä½¿ç”¨çš„åºåˆ—æˆ–è€…æ˜¯è·å¾—ä¸€ç§æ›´å¼ºå¤§çš„æŠ½è±¡èƒ½åŠ›ã€‚

### 2. ç¼–è¯‘æœŸå’Œè¿è¡ŒæœŸé—´
ä¸å‡ºæ„å¤–çš„,ä½œä¸ºä¸€ä¸ªè¡¨ç°èƒ½åŠ›å¼ºæ‚çš„lispåœ¨jvmä¸Šçš„æ–¹è¨€clojure,å½“ç„¶ä¸ä¼šç¼ºå°‘äº†è¿™ä¸ªç¥å¥‡çš„`å®`äº†.å®æœ€ä¸ºclojureä¸Šä¸€ä¸ªå¼ºæœ‰åŠ›çš„æŠ½è±¡å·¥å…·,æ˜¯è®©æˆ‘è¿™æ ·çš„æ–°æ‰‹åˆçˆ±åˆæ€•,å–œæ¬¢ä»–çš„å¼ºå¤§,ä½†æ˜¯åˆæ€•éš¾ä»¥é©¾é©­.
`å®`è®©æˆ‘ä»¬å¯æ§åˆ¶clojureçš„ç¼–è¯‘å™¨.æˆ‘ä»¬é€šå¸¸æŠŠjavaç§°ä¸º`æ²¡æœ‰æª,æ²¡æœ‰åˆ€çš„C++,æŠŠrubyå’Œpythonç§°ä¸º"å…µå·¥å‚"`,è€Œclojureçš„å®å¯ä»¥ä½¿ä½ æ„å»ºä»»ä½•æ­¦å™¨,å¹¶ä¸”è®©ä½ çš„æ­¦å™¨ä½¿ç”¨èµ·æ¥å’Œè¯­è¨€çš„å†…ç½®æ­¦å™¨ä¹ˆæœ‰ä»€ä¹ˆåŒºåˆ«.
è¦ç†è§£å®,å°±è¦å…ˆç†è§£`"ç¼–è¯‘æœŸ"`å’Œ`"è¿è¡ŒæœŸ"`çš„åŒºåˆ«.
Clojureåœ¨è½½å…¥æºç çš„æ—¶å€™,ä¹Ÿå°±æ˜¯ä½ å†™çš„Codeå†è¢«Clojure Readerè¯»å…¥çš„æ—¶å€™,æ–‡æœ¬å½¢å¼çš„Clojureä»£ç ä¼šè½¬å˜æˆList[ä¹Ÿå°±æ˜¯Clojureé‡Œé¢çš„æ•°æ®ç»“æ„],readä¼šå¯¹listè¿›è¡Œæ±‚å€¼,ç¼–è¯‘å‘ç”Ÿåœ¨readå’Œæ±‚å€¼ä¹‹é—´,è€Œæ­£æ˜¯è¿™ä¸ªç¼–è¯‘çš„è¿‡ç¨‹,ä½¿å¾—å®çš„å±•å¼€æˆä¸ºäº†å¯èƒ½.æ¢å¥è¯è¯´,`å®`æ˜¯è¢«ç¼–è¯‘å™¨è°ƒç”¨çš„.
ä¸ºä½•Clojureä¼šæœ‰è¿™ç§ç¥å¥‡çš„ç°è±¡,æ˜¯å› ä¸ºä¸€ä¸ªæˆä¸º`åŒåƒæ€§`çš„ç‰¹æ€§,å—¯?`åŒåƒæ€§`æ˜¯ä¸ªä»€ä¹ˆæ¢—?
>ä¸€é—¨è¯­è¨€çš„ä»£ç å¯ä»¥ç”¨è¯­è¨€è‡ªèº«çš„æ•°æ®ç»“æ„æ¥æè¿°,è¿™ä¸€ç‰¹æ€§è¢«ç§°ä¸º`åŒåƒæ€§`.

### 3. Clojureé‡Œé¢çš„å®
åœ¨Clojureçš„ä¸–ç•Œé‡Œ,ä½¿ç”¨`defmacro`å°±å¯ä»¥å®šä¹‰ä¸€ä¸ªå®.so,é­”æ³•å¦‚æ­¤ç®€å•.
ä»”ç»†æƒ³ä¸€æƒ³,æœ‰å“ªäº›å¸¸ç”¨çš„å®å‘¢?
```clojure
->
->>
```
æ˜¯ä¸æ˜¯å¾ˆç†Ÿæ‚‰?
`->`å’Œ`->>`è¿™ä¸¤ä¸ªä¸²è¡Œå®å’Œ,,ä¸‹ä¸€ç¯‡æ–‡ç« å’±ä»¬å°±è‡ªå·±ç”¨`å®`å®ç°ä¸€ä¸ªè¿™ä¸ªç©æ„.

#### 3.1 æ‰‹æ³• ~@ ` ~
è¦å†™`å®`,è¦å†™å¥½`å®`,å°±è¦å…ˆäº†è§£è¿™å‡ ä¸ªä¸œè¥¿:
>`è¯­æ³•å¼•è¿°[synatx quote]`
`è¿”å¼•è¿°[unqute]`
`ç¼–æ¥åå¼•è¿°[splicing-quote]`

è¿™äº›è¯­æ³•å¹¶ä¸æ˜¯ä¸“é—¨ä¸ºäº†Clojureçš„å®è®¾è®¡çš„,ä½ å¯ä»¥åœ¨å…¶ä»–ä»£ç ä¸­ä½¿ç”¨å®ƒä»¬.

##### 3.1.1 `è¯­æ³•å¼•è¿°[synatx quote]` --->`
ä½ å¯ä»¥ç†è§£ä¸ºé˜»æ­¢æ±‚å€¼,å½“æˆ‘ä»¬è¦ä¿ç•™ä¸€æ®µä»£ç çš„æ˜¯å†™æ¨¡æ ·çš„æ—¶å€™,ä½¿ç”¨è¿™ä¸ªç¬¦å·,é‚£ä¹ˆåœ¨Clojure Readerçš„æ—¶å€™ä¸ä¼šå¯¹ä½ å†™çš„è¡¨è¾¾å¼è¿›è¡Œæ±‚å€¼,ä»è€Œä¿æŒä½ä¹¦å†™æ—¶çš„æ ·å­.
ä¾‹å¦‚è®©æˆ‘ä»¬ä¹¦å†™:
```clojure
(1 2 3 4) ;okæ²¡æœ‰é—®é¢˜.
(+ 1 2 3);ä¹Ÿè®¸ä½ æƒ³è¦çš„æ˜¯ä¸€ä¸ªlist,é‡Œé¢ä¿å­˜æœ‰+ 1 2 3,ä½†æ˜¯è¿™æ®µä»£ç å´è¢«æ±‚å€¼äº†,å˜æˆäº†ä½ ä¸æƒ³è¦çš„ 6
(1 + 3 2);è¿™æ®µç›´æ¥æŠ¥é”™äº†.
```
æ²¡é”™,é‚£ä¹ˆæˆ‘ä»¬å¦‚ä½•è®©`(+ 1 2 3)æˆ–è€…æ˜¯(1 + 3 2)`ä¿æŒä½è¿™ä¸ªlistçš„çŠ¶ä½“è€Œä¸è¢«æ±‚å€¼å‘¢?å¾ˆç®€å•,åœ¨ä»–ä»¬çš„å‰é¢å¢åŠ   `  å°±okäº†.
```clojure
`(+ 1 2 3);ok,æ²¡é—®é¢˜
`(1 + 3 2);ok,æ²¡é—®é¢˜
```
å¯¹,æ²¡é”™,å°±æ˜¯è¿™ä¹ˆç®€å•.

##### 3.1.2 `è¿”å¼•è¿°[unqute]` ----------> ~
é‚£ä¹ˆä»€ä¹ˆæ˜¯åå¼•è¿°å‘¢? å…¶å®å°±æ˜¯ä¸ª `~`,å¯¹,å°±æ˜¯è¿™ä¸ªç¬¦å·.
é‚£ä¹ˆè¿™ä¸ª`~`æœ‰å’Œä½œç”¨å‘¢?ä»–çš„ä½œç”¨å°±æ˜¯åœ¨é˜»æ­¢æ±‚å€¼çš„è¡¨è¾¾å¼é‡Œè¿›è¡Œæ­£å¸¸çš„æ±‚å€¼.
```clojure
`(+ 1 2 3 4 (+ 10 10))
```
è¿™ä¸ªè¡¨è¾¾å¼ä¼šè¢«é˜»æ­¢æ±‚å€¼,ä¿æŒåŸæ ·.ä½†æ˜¯å’±ä»¬è¦çš„æ˜¯ç»“æœæ˜¯`(+ 1 2 3 4 20)`
å’±ä»¬è¦æ€ä¹ˆå¯¹éœ€è¦è¿›è¡Œæ±‚å€¼çš„åœ°æ–¹æ­£ç¡®çš„æ±‚å€¼å‘¢?
è¿™æ—¶å€™å°±è¦ç”¨åˆ°`~`äº†,å¦‚ä¸‹:
```clojure
`(+ 1 2 3 4 ~(+ 10 10))
```
è¿™æ ·çš„ä»£ç è·‘è¿‡åå°±æˆäº†`(+ 1 2 3 4 20)`,æœä¸å…¶ç„¶å°±æ˜¯å’±ä»¬æƒ³è¦çš„äº†.

##### 3.1.3 `ç¼–æ¥åå¼•è¿°[splicing-quote]`--> ~@
è¿™ä¸ªå°±å¥½ç©, `~@`ç¥å¥‡çš„ä¸œè¥¿,è¿™ä¸ªä¸œè¥¿å§‘ä¸”å¯ä»¥ç†è§£ä¸ºè®²ä¸€ä¸ªå˜é‡å¤šä»£è¡¨çš„å†…å®¹è¿›è¡Œå±•å¼€å¹¶ä¸”é˜»æ­¢æ±‚å€¼,ç”±äºClojureæœ¬èº«å°±æ˜¯List,å› æ­¤è¿™ä¸ªå˜çš„ååˆ†æœ‰è¶£.
```clojure
(defmacro foreach [x y& body]
```

#### 3.2 &evnå’Œ&from
>pass
#### 3.3 å«ç”Ÿå®(å®æ±¡æŸ“)å’Œsysgems
>pass
#### 3.4 é‡å¤æ±‚å€¼é—®é¢˜
>pass
#### Clojureç¼–è¯‘æ¨¡å‹
![Clojureç¼–è¯‘æ¨¡å‹](/images/posts/Clojureçš„å®/clojure-ç¼–è¯‘æ¨¡å‹.png)







